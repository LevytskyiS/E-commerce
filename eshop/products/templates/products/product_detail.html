{% extends 'products/base.html' %}
{% load static %}

{% load custom_tags %}

{% block content %}

<div class="product__detail">
    <div class="container">
        <div class="product__detail__row">
            <div class="product__photos">
                {% for product_image in  product.product_image.all %}
                <div class="product__detail__photo"><img src="{{ product_image.image.image }}" alt="{{ product_image.name }}"></div>
                {% endfor %}
            </div>
            <div class="product__data">
                <div class="product__title">
                    <h2>{{ product.name }}</h2>
                </div>
                <div class="product__subtitle">
                    <h2>Lorem ipsum, dolor sit amet consectetur adipisicing.</h2>
                </div>
                <div class="product__attribute">
                    <div class="product__attribute__subtitle">
                        Properties
                    </div>

                    <ul class="product__attributes">
                        {% for attribute in product.attributes.all|filter_by_name:"details" %}
                            <li>{{ attribute.attribute_value.value }}</li>
                        {% endfor %}
                    </ul>
                </div>

                <form method="post" action="#" class="product__form">
                    {% csrf_token %}
                    <div class="product__choose">
                        <div class="product__option">
                            <div class="product__attribute__subtitle">
                                Color
                            </div>
                            <select name="color">
                                {% for attribute in product.attributes.all|filter_by_name:"color" %}
                                <!-- selected - значение по умолчанию -->
                                <option value="{{ attribute.attribute_value.value }}">{{ attribute.attribute_value.value }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="product__option">
                            <div class="product__attribute__subtitle">
                                Size
                            </div>
                            <select name="size">
                                {% for attribute in product.attributes.all|filter_by_name:"size" %}
                                <!-- selected - значение по умолчанию -->
                                <option value="{{ attribute.attribute_value.value }}">{{ attribute.attribute_value.value }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                    <button class="product__submit__btn" type="submit">Order</button>
                </form>

            </div>
        </div>
    </div>
</div>

{{ product.name }}<br/><br/>

{% for attribute in product.attributes.all %}
    {{ attribute.attribute_name}}: {{ attribute.attribute_value }}<br/>
{% endfor %}<br/>

{% for nomenclature in product.get_nomenclatures %}
    {{ nomenclature.code }}: {{ nomenclature.price }} | Available: {{ nomenclature.quantity_available }}<br/><br/>
{% endfor %}

{% endblock %}